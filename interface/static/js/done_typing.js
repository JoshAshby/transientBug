// Generated by CoffeeScript 1.5.0
(function() {
  var $;

  $ = jQuery;

  $.fn.extend({
    done_typing: function(options) {
      var opts, self;
      self = $.fn.done_typing;
      opts = $.extend({}, self.default_options, options);
      return $(this).each(function(i, el) {
        return self.init(el, opts);
      });
    }
  });

  $.extend($.fn.done_typing, {
    default_options: {
      wait_interval: 2000,
      on_done: null,
      on_empty: null
    },
    init: function(_el, opts) {
      this._el = $(_el);
      this._opts = opts;
      this._timeout_id = null;
      return this.build();
    },
    build: function() {
      var self;
      self = this;
      return this._el.keyup(function() {
        clearTimeout(self._timeout_id);
        if ($(this).val()) {
          return self._timeout_id = setTimeout(function() {
            return self.done(self);
          }, self._opts.wait_interval);
        } else {
          return self._timeout_id = setTimeout(function() {
            return self.empty(self);
          }, self._opts.wait_interval);
        }
      });
    },
    done: function(self) {
      $.event.trigger({
        type: "done_typing-paused",
        element: self._el
      });
      if (self._opts.on_done != null) {
        return self._opts.on_done();
      }
    },
    empty: function(self) {
      $.event.trigger({
        type: "done_typing-empty",
        element: self._el
      });
      if (self._opts.on_empty != null) {
        return self._opts.on_empty();
      }
    }
  });

}).call(this);
