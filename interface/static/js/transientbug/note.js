// Generated by CoffeeScript 1.5.0
(function() {

  $(function() {
    var editor, tags;
    $("#del_btn").click(function(e) {
      var img, yesno;
      e.preventDefault();
      yesno = confirm("Are you sure you want to delete this note?");
      if (yesno) {
        img = $(this).data("short");
        return $.post("/notes/edit/" + img + "/delete", function(data) {
          if (data[0]["success"]) {
            return window.location.href = "/notes";
          }
        });
      }
    });
    editor = new EpicEditor({
      theme: {
        base: 'css/lib/epic/base/epiceditor.css',
        preview: 'css/lib/epic/preview/github.css',
        editor: 'css/lib/epic/editor/epic-dark.css'
      },
      basePath: '/static/',
      autogrow: {
        minHeight: $("main").height()
      },
      textarea: "content"
    }).load();
    editor.on('update', function() {
      return $("#preview").html(this.exportFile(null, 'html'));
    }).emit('update');
    $("#tags").pillbox();
    tags = $.ajax({
      url: "/notes/tags/json",
      async: false
    });
    return $('.pillbox input').typeahead({
      name: 'notes_tags',
      local: tags.responseJSON[0],
      limit: 10
    });
  });

}).call(this);
